# Coding Conventions

**Analysis Date:** 2026-01-21

## Naming Patterns

**Files:**
- **UI Components**: PascalCase (e.g., `button.tsx`, `hero.tsx`, `loading-context.tsx`)
- **Utility files**: kebab-case (e.g., `use-parallax.ts`, `gallery-blur.ts`)
- **Hooks**: PascalCase with `use` prefix exported as function (e.g., `useParallax`, `useI18n`, `useLoading`)
- **Contexts**: descriptive names with `-context.tsx` suffix (e.g., `loading-context.tsx`, `i18n.tsx`)

**Functions:**
- React components: PascalCase (e.g., `function Header()`, `function Hero()`, `export function Button()`)
- Utilities and hooks: camelCase (e.g., `useParallax()`, `useFadeIn()`, `useI18n()`, `getBlurDataURL()`)
- Event handlers: `handleEventName` or `eventName` (e.g., `showHeader()`, `hideHeader()`, `scrollToProjects()`)

**Variables:**
- State and refs: camelCase (e.g., `isHiddenRef`, `hasAnimatedRef`, `isLoadingComplete`, `isAlmostComplete`)
- Constants: camelCase (e.g., `galleryBlurData`, `translations`, `jetbrainsMono`)
- Boolean flags: `is*` prefix (e.g., `isAlmostComplete`, `isHiddenRef`, `isTransitioning`)

**Types:**
- Interfaces: PascalCase with `Type` suffix (e.g., `LoadingContextType`, `I18nContextType`, `ParallaxOptions`)
- Props interfaces: `ComponentNameProps` or inline object types
- Exported types use `type` keyword for semantic clarity

## Code Style

**Formatting:**
- Tool: Biome 2.2.0
- Indent style: Spaces
- Indent width: 2 spaces
- Configuration: `biome.json`

**Linting:**
- Tool: Biome with recommended rules
- Domains enabled: Next.js (recommended), React (recommended)
- Import organization: Automatic via `organizeImports: "on"` in assist actions
- Key disabled rule: `suspicious.noUnknownAtRules` (off for Tailwind at-rules support)

**Run Commands:**
```bash
biome check              # Check code style and linting
biome format --write    # Auto-format all files
```

## Import Organization

**Order:**
1. External libraries and React (e.g., `import { useEffect, useRef } from "react"`)
2. Third-party UI libraries (e.g., `import { Button as ButtonPrimitive } from "@base-ui/react/button"`)
3. Third-party animation/utility libraries (e.g., `import { gsap } from "gsap"`)
4. Local components using alias (e.g., `import { Logo } from "./logo"`, `import { Button } from "@/components/ui/button"`)
5. Local utilities and contexts (e.g., `import { cn } from "@/lib/utils"`, `import { useLoading } from "./loading-context"`)

**Path Aliases:**
- `@/` resolves to root directory (configured in `tsconfig.json`)
- Used for all imports from `components/`, `lib/`, `hooks/`, `app/`

**Example from `components/portfolio/header.tsx`:**
```typescript
import { useEffect, useRef } from "react"
import { gsap } from "gsap"
import { ScrollTrigger } from "gsap/ScrollTrigger"
import { Logo } from "./logo"
import { ThemeToggle } from "./theme-toggle"
import { LanguageToggle } from "./language-toggle"
import { useLoading } from "./loading-context"
```

## Error Handling

**Patterns:**
- **Context hooks**: Throw descriptive `Error` objects when hook is used outside provider
  ```typescript
  export function useI18n() {
    const context = useContext(I18nContext)
    if (!context) {
      throw new Error("useI18n must be used within I18nProvider")
    }
    return context
  }
  ```
- **Refs and DOM access**: Early return when ref is null/not available
  ```typescript
  const element = ref.current
  if (!element) return
  ```
- **Animation cleanup**: Use GSAP context cleanup or ScrollTrigger.kill()
  ```typescript
  return () => {
    ScrollTrigger.getAll().forEach((t) => {
      if (t.trigger === element) t.kill()
    })
  }
  ```

## Logging

**Framework:** `console` (no external logging library)

**Patterns:**
- No `console.log()` statements in production code
- No `debugger` or `alert()` statements in committed code
- Logging via Biome linter rules enforces this

## Comments

**When to Comment:**
- Complex animation sequences (e.g., GSAP timelines with multiple steps)
- Non-obvious logic (e.g., ternary expressions with side effects)
- Generated code markers (e.g., `// Auto-generated by scripts/generate-blur.ts`)
- Section headers for large components (e.g., `// Pin the hero section`)

**Comment Style:**
- Use `//` for single-line comments
- Keep comments concise and on same line as code when possible
- Example from `components/portfolio/hero.tsx`:
  ```typescript
  // Pin the hero section - About will scroll over it
  ScrollTrigger.create({
    trigger: sectionRef.current,
    start: "top top",
    end: "bottom top",
    pin: true,
    pinSpacing: false,
  })
  ```

**JSDoc/TSDoc:**
- Not systematically used in codebase
- Type definitions are self-documenting via TypeScript interfaces
- Optional for complex utility functions

## Function Design

**Size:** Aim for small, focused functions under 30-50 lines
- Larger functions should be broken into hooks or utilities
- Example: `useFadeIn()` and `useParallax()` are separate focused hooks

**Parameters:**
- Use destructuring for object parameters
- Provide default values for optional parameters
- Example:
  ```typescript
  export function useFadeIn<T extends HTMLElement>({
    delay = 0,
    duration = 0.8,
    y = 50,
    stagger = 0.1
  }: FadeInOptions = {})
  ```

**Return Values:**
- React components return JSX.Element
- Hooks return refs, state values, or context objects
- Utilities return typed values (string, boolean, object, etc.)
- Example from `gallery-blur.ts`:
  ```typescript
  export function getBlurDataURL(src: string): string {
    return galleryBlurData[src] ?? "data:image/jpeg;base64,..."
  }
  ```

## Module Design

**Exports:**
- Named exports for components, hooks, utilities: `export function ComponentName()`, `export { Button }`
- Default exports used for Next.js app routes: `export default function Home()`
- UI components export both component and related types: `export { Button, buttonVariants }`

**Barrel Files:**
- Used in `components/ui/` for exporting multiple subcomponents
- Example from `components/ui/card.tsx`:
  ```typescript
  export {
    Card,
    CardHeader,
    CardFooter,
    CardTitle,
    CardAction,
    CardDescription,
    CardContent,
  }
  ```

**File Organization:**
- Components are self-contained with related types
- Utilities separated by concern (`gallery-blur.ts`, `utils.ts` for helpers)
- Contexts and providers co-located with consumers when possible

## Client/Server Components

**"use client" directive:**
- Applied at top of files requiring React hooks (e.g., `useEffect`, `useState`, `useRef`)
- Examples: all portfolio components, all UI interactive components, hooks files
- Server components (pages, layouts) don't need directive

**Pattern:**
```typescript
"use client"

import { useEffect, useRef } from "react"
// ... rest of imports and component
```

## Type Annotations

**Explicit typing:** Required for function parameters and return types
- All component props are explicitly typed
- All hook parameters are typed
- Generic types used for flexibility (e.g., `<T extends HTMLElement>`)

**Example from `hooks/use-parallax.ts`:**
```typescript
interface ParallaxOptions {
  speed?: number
  direction?: "up" | "down"
}

export function useParallax<T extends HTMLElement>({ speed = 0.5, direction = "up" }: ParallaxOptions = {}) {
  const ref = useRef<T>(null)
  // ...
}
```

## React-Specific Patterns

**Hooks usage:**
- Always at top level of component, never conditionally
- Dependencies correctly specified in dependency arrays
- Example from `components/portfolio/header.tsx`:
  ```typescript
  useEffect(() => {
    if (!isAlmostComplete || hasAnimatedRef.current) return
    // animation logic
  }, [isAlmostComplete])
  ```

**Props spreading:**
- Used with `{...props}` to pass through HTML attributes
- Example from `components/ui/button.tsx`:
  ```typescript
  function Button({ className, variant = "default", size = "default", ...props }: ...) {
    return <ButtonPrimitive ... {...props} />
  }
  ```

**Children handling:**
- Nested between opening/closing tags, not as prop
- Example from `app/layout.tsx`:
  ```typescript
  <Providers>{children}</Providers>
  ```

**Semantic HTML:**
- Use semantic elements: `<button>`, `<header>`, `<section>`, `<nav>`
- Add `rel="noopener noreferrer"` for external links with `target="_blank"`
- Example from `components/portfolio/hero.tsx`:
  ```typescript
  <a href={link.href} target="_blank" rel="noopener noreferrer">
  ```

---

*Convention analysis: 2026-01-21*
